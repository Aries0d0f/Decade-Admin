webpackJsonp([1],{"+6My":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"login"}},[i("div",{staticClass:"container"},[t._m(0),t._v(" "),i("h2",[t._v("後台管理系統 - 登入")]),t._v(" "),i("div",{staticClass:"content"},[t.msg?i("div",{staticClass:"msg"},[i("span",[t._v(t._s(t.msg))])]):t._e(),t._v(" "),i("div",{staticClass:"action"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.pwd,expression:"user.pwd"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.user.pwd},on:{input:function(e){e.target.composing||t.$set(t.user,"pwd",e.target.value)}}}),t._v(" "),i("div",{staticClass:"button",on:{click:function(e){t.login()}}},[i("span",[t._v("Go")])])])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"logo"}},[s("img",{attrs:{src:i("+BH7"),alt:""}})])}],a={render:s,staticRenderFns:n};e.a=a},"+BH7":function(t,e){t.exports="data:image/png;base64,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"},"2dmD":function(t,e,i){"use strict";var s=i("bC5p"),n=i("ICTg"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},DkQ0:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("NYxO"),o=i("GPhf");e.a={components:{Navbar:o.a},computed:n()({},Object(a.c)(["user"]),Object(a.c)(["allpost"])),created:function(){this.getPosts()},mounted:function(){this.getPosts()},methods:n()({},Object(a.b)(["allPost"]),{getPosts:function(){var t=this;this.$http.get("/api/post").then(function(e){var i=e.data.data.length-1;e.data.data.forEach(function(e){t.allpost[i--]=e})})}})}},"Du/2":function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return n});var s="USER",n="ALL_POST";e.c={SET_USER:function(t,e){t.user=e}}},E5Op:function(t,e,i){"use strict";var s=i("ccrT"),n=i("L2tL"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},GPhf:function(t,e,i){"use strict";var s=i("2dmD");i.d(e,"a",function(){return s.a})},ICTg:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"nav"}},[s("div",{staticClass:"profile"},[s("div",{staticClass:"photo",style:{background:"url("+(t.user.meta?t.user.meta.photo:i("uZxA"))+")"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v(t._s(t.user.username))]),t._v(" "),s("p",{staticClass:"tag"},[t._v(t._s(t.role[t.user.role]))])])]),t._v(" "),s("div",{staticClass:"menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/posts/new"}},[t._v("新增文章")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/posts"}},[t._v("文章管理")])],1)])]),t._v(" "),s("div",{staticClass:"menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/stock/new"}},[t._v("商品上架")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/stock"}},[t._v("商品管理")])],1)])])])},n=[],a={render:s,staticRenderFns:n};e.a=a},IU37:function(t,e,i){"use strict";var s=i("NC6I");e.a={data:function(){return{user:{username:"",pwd:""},msg:""}},methods:{login:function(){var t=this;""!==this.username&&""!==this.pwd?this.$http.post("/api/user",{username:this.user.username,pwd:s(this.user.pwd)}).then(function(e){var i=e.data;switch(!0){case-1===i.result:t.msg="Username or pwd was incorrect.";break;case 0===i.result:t.$http.put("/api/user/"+i.uid,{token:s("TOKEN="+(new Date).toString()+i.uid)}),t.$store.commit("SET_USER",i),t.$cookie.set("token",s("TOKEN="+(new Date).toString()+i.uid),{domain:window.location.hostname,expires:"10m"}),t.$router.push({name:"Home"})}}):this.msg="Username and password shoud not be blank."}}}},IcnI:function(t,e,i){"use strict";var s=i("7+uW"),n=i("NYxO"),a=i("mUbh"),o=i("UjVw"),c=i("Du/2");s.a.use(n.a);var r=new n.a.Store({strict:!0,state:{user:{},allPost:[]},mutations:c.c,actions:a,getters:o});e.a=r},"Irp/":function(t,e,i){"use strict";var s=i("DkQ0"),n=i("gBIf"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},L2tL:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"posts"},[i("div",{staticClass:"editor"},[i("h1",[t._v("新增文章")]),t._v(" "),i("div",{staticClass:"editor-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],attrs:{id:"title",type:"text",placeholder:"標題"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._v(" "),i("div",{staticClass:"classBar"},[i("ul",t._l(t.classType,function(e,s){return i("li",{on:{click:function(i){t.classSelect(e,s)}}},[i("span",{staticClass:"uppercase soli"},[t._v(t._s(e))])])}))]),t._v(" "),i("textarea",{attrs:{name:"",id:"first",rows:"10",placeholder:"文章段落"}}),t._v(" "),t._l(t.addHTML,function(e,s){return i("div",{staticClass:"blocks"},[t.onRemove?i("span",{staticClass:"icon",on:{click:function(e){t.addHTML.splice(s,1)}}},[i("font-awesome-icon",{attrs:{icon:"minus-circle"}})],1):t._e(),i("span",{staticClass:"block",attrs:{id:"block-"+s},domProps:{innerHTML:t._s(e)}})])})],2)]),t._v(" "),t.uploadFile?i("div",{staticClass:"imgUpload"},[i("div",{staticClass:"upload-container"},[i("div",{staticClass:"close",on:{click:function(e){t.uploadFile=!1}}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1),t._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"upload",id:"upload",accept:"image/*"},on:{change:t.handleFiles}}),t._v(" "),i("img",{staticClass:"preview",attrs:{src:t.image}}),t._v(" "),t.image?t._e():i("div",{staticClass:"button",on:{click:function(e){t.img()}}},[t._v("上傳圖片")]),t._v(" "),t.image?i("div",{staticClass:"button",on:{click:function(e){t.imgUpload()}}},[t._v("確定")]):t._e()])]):t._e(),t._v(" "),t.addIframe?i("div",{staticClass:"imgUpload"},[i("div",{staticClass:"upload-container"},[i("div",{staticClass:"close",on:{click:function(e){t.addIframe=!1}}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1),t._v(" "),i("input",{attrs:{type:"text",name:"iframe"}}),t._v(" "),i("div",{staticClass:"button",on:{click:function(e){t.Iframe()}}},[t._v("OK")])])]):t._e(),t._v(" "),i("div",{staticClass:"toolbox"},[i("ul",[i("li",{on:{click:function(e){t.addHTML.push(t.tools.subtitle)}}},[i("div",[t._v("h2")]),i("div",[t._v("副標題")])]),t._v(" "),i("li",{on:{click:function(e){t.addHTML.push(t.tools.microtitle)}}},[i("div",[t._v("h3")]),i("div",[t._v("小標題")])]),t._v(" "),i("li",{on:{click:function(e){t.addHTML.push(t.tools.paragraph)}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"paragraph"}})],1),i("div",[t._v("文章段落")])]),t._v(" "),i("li",{on:{click:function(e){t.uploadFile=!0}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"image"}})],1),i("div",[t._v("圖片")])]),t._v(" "),i("li",{on:{click:function(e){t.addIframe=!0}}},[i("div",[i("font-awesome-icon",{attrs:{icon:["fab","youtube"]}})],1),i("div",[t._v("影片嵌入")])]),t._v(" "),i("li",{on:{click:function(e){t.onRemove=!t.onRemove}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"times"}})],1),i("div",[t._v("刪除區塊")])]),t._v(" "),i("li",{on:{click:t.submit}},[i("div",[i("font-awesome-icon",{attrs:{icon:"eye"}})],1),i("div",[t._v("預覽")])]),t._v(" "),i("li",{on:{click:t.submit}},[i("div",[i("font-awesome-icon",{attrs:{icon:"paper-plane"}})],1),i("div",[t._v("發佈")])])])])])},n=[],a={render:s,staticRenderFns:n};e.a=a},M93x:function(t,e,i){"use strict";function s(t){i("WRn/")}var n=i("xJD8"),a=i("xQV6"),o=i("VU/8"),c=s,r=o(n.a,a.a,!1,c,null,null);e.a=r.exports},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"app",function(){return A});var s=i("Dd8w"),n=i.n(s),a=i("7+uW"),o=i("9JMe"),c=(i.n(o),i("mtWM")),r=i.n(c),l=i("Rf8U"),u=i.n(l),d=i("K/Lq"),p=i.n(d),v=i("M93x"),m=i("YaEn"),f=i("IcnI"),h=i("U0v6"),g=i.n(h),_=i("QxPg"),w=i("h17U"),k=i("1P+R");i.d(e,"router",function(){return m.a}),i.d(e,"store",function(){return f.a}),i.d(e,"FontAwesome",function(){return _.default}),_.default.library.add(w.a,k.a,k.g,k.d,k.j,k.f,k.e,k.k,k.h,k.i,k.c,k.b),a.a.component("FontAwesomeIcon",g.a),a.a.router=m.a,a.a.use(u.a,r.a),a.a.use(p.a),a.a.config.devtools=!0,Object(o.sync)(f.a,m.a);var A=new a.a(n()({router:m.a,store:f.a},v.a)).$mount("#app")},OkQu:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("NYxO");e.a={computed:n()({},Object(a.c)(["user"]),Object(a.c)(["allpost"])),methods:{openLink:function(t){window.open(t)},deletePost:function(t){confirm("確定要刪除這篇文章？此動作不可回復")&&this.$http.delete("/api/post/"+t).then(function(t){t.data.result?console.log(t):window.location="/posts"})}}}},QuMW:function(t,e,i){"use strict";var s=i("o1li"),n=i("pQnX"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},UjVw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"user",function(){return s}),i.d(e,"allpost",function(){return n});var s=function(t){return t.user},n=function(t){return t.allPost}},"WRn/":function(t,e){},YKyH:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"posts"},[i("div",{staticClass:"list"},[i("h1",[t._v("文章管理")]),t._v(" "),i("div",{staticClass:"list-container"},[i("div",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.allpost,function(e){return i("div",{staticClass:"column"},[i("div",[i("p",[t._v(t._s(e.title.slice(0,17)+(e.title.split("").length>18?"...":"")))])]),t._v(" "),t._m(1,!0),t._v(" "),i("div",[i("p",[t._v(t._s(e.content.split(">")[1].slice(0,17).split("<")[0]+"..."))])]),t._v(" "),i("div",[i("p",{on:{click:function(i){t.openLink("http://60.249.179.125/magazine/"+e._id)}}},[i("font-awesome-icon",{attrs:{icon:"eye"}}),i("span",[t._v("檢視")])],1),i("p",[i("font-awesome-icon",{attrs:{icon:"edit"}}),i("span",[t._v("編輯")])],1),i("p",{on:{click:function(i){t.deletePost(e._id)}}},[i("font-awesome-icon",{attrs:{icon:"minus-circle"}}),i("span",[t._v("刪除")])],1)])])})],2)])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column title"},[i("div",[i("p",[t._v("文章標題")])]),t._v(" "),i("div",[i("p",[t._v("作者")])]),t._v(" "),i("div",[i("p",[t._v("內容概覽")])]),t._v(" "),i("div",[i("p",[t._v("動作")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",[t._v("decade")])])}],a={render:s,staticRenderFns:n};e.a=a},YaEn:function(t,e,i){"use strict";var s=i("7+uW"),n=i("/ocq"),a=i("Irp/"),o=i("qzG6"),c=i("drNY"),r=i("sGXP");s.a.use(n.a);var l=new n.a({mode:"history",routes:[{path:"/",name:"Home",component:a.a,children:[{path:"/posts",name:"Post",component:c.a},{path:"/posts/new",name:"New Post",component:c.b},{path:"/stock",name:"Stock",component:r.a},{path:"/stock/new",name:"Stock",component:r.b}]},{path:"/login",name:"Login",component:o.a}]});e.a=l},bC5p:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("NYxO");e.a={data:function(){return{role:["使用者","編輯","廠商","管理員","superuser"]}},computed:n()({},Object(a.c)(["user"]))}},ccrT:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("NYxO");e.a={data:function(){return{classType:["classic","beauty","lifestyle","fashion","feature","talk","shop"],post:{title:"",category:-1,author:"",content:""},tools:{subtitle:'<input id="subtitle" type="text" placeholder="副標題">',microtitle:'<input id="microtitle" type="text" placeholder="小標題">',paragraph:'<textarea id="paragraph" name="" rows=\'10\' placeholder="文章段落"></textarea>'},addHTML:[],uploadFile:!1,addIframe:!1,image:"",onRemove:!1}},computed:n()({},Object(a.c)(["user"])),mounted:function(){var t=this;this.post.author=this.user.uid,document.querySelectorAll("textarea").forEach(function(e){e.addEventListener("keyup",t.autosize)})},methods:{autosize:function(t){t.srcElement.style.cssText="height:auto",t.srcElement.style.cssText="height:"+t.srcElement.scrollHeight+"px"},classSelect:function(t,e){return this.post.category=e,document.querySelectorAll(".classBar>ul>li").forEach(function(t){t.className=""}),document.querySelectorAll(".classBar>ul>li")[this.post.category].className="active",this.post.category},img:function(){document.querySelector("#upload").click()},Iframe:function(){this.addHTML.push(""+document.querySelector('input[name="iframe"]').value),this.addIframe=!1},handleFiles:function(t){var e=t.target.files||t.dataTransfer.files;this.createImage(e[0])},createImage:function(t){var e=this,i=new FileReader;i.onload=function(t){e.image=t.target.result},i.readAsDataURL(t)},imgUpload:function(){var t=this,e=new FormData;e.append("file",document.querySelector("#upload").files[0]),this.$http.put("/upload",e,{"Content-Type":"multipart/form-data"}).then(function(e){0===e.data.result&&(t.addHTML.push('<img id="image" src="'+e.data.path+'">'),t.image="",t.uploadFile=!1)})},preview:function(){function t(t,e,s){if("image"===s)i[e]='<img src="'+t.src+'">';else if("subtitle"===s)i[e]="<h2>"+t.value+"</h2>";else if("microtitle"===s)i[e]="<h3>"+t.value+"</h3>";else if("paragraph"===s)i[e]="<p>"+t.value+"</p>";else{var n=document.createElement("div");n.appendChild(t.cloneNode()),i[e]=n.innerHTML}}var e=this;this.post.content="<p>"+document.querySelectorAll("#first")[0].value+"</p>";var i=[];document.querySelectorAll(".block").forEach(function(e){t(e.children[0],parseInt(e.id.replace("block-","")),e.children[0].id)}),i.forEach(function(t){e.post.content+=t})},submit:function(){var t=this;this.preview(),this.$http.post("/api/post",{title:this.post.title,content:this.post.content,author:this.post.author}).then(function(e){0===e.data.result?(t.$http.put("/api/post/"+e.data.pid,{category:t.post.category,image:document.querySelectorAll("img")[0]?document.querySelectorAll("img")[0].src:null}).then(),window.open("http://60.249.179.125/magazine/"+e.data.pid)):console.log(e.data)})}}}},drNY:function(t,e,i){"use strict";var s=i("E5Op"),n=i("noBe");i.d(e,"b",function(){return s.a}),i.d(e,"a",function(){return n.a})},fV2H:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"posts"},[i("div",{staticClass:"list"},[i("h1",[t._v("文章管理")]),t._v(" "),i("div",{staticClass:"list-container"},[i("div",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.allpost,function(e){return i("div",{staticClass:"column"},[i("div",[i("p",[t._v(t._s(e.title.slice(0,17)+(e.title.split("").length>18?"...":"")))])]),t._v(" "),t._m(1,!0),t._v(" "),i("div",[i("p",[t._v(t._s(e.content.split(">")[1].slice(0,17).split("<")[0]+"..."))])]),t._v(" "),i("div",[i("p",{on:{click:function(i){t.openLink("http://60.249.179.125/magazine/"+e._id)}}},[i("font-awesome-icon",{attrs:{icon:"eye"}}),i("span",[t._v("檢視")])],1),i("p",[i("font-awesome-icon",{attrs:{icon:"edit"}}),i("span",[t._v("編輯")])],1),i("p",{on:{click:function(i){t.deletePost(e._id)}}},[i("font-awesome-icon",{attrs:{icon:"minus-circle"}}),i("span",[t._v("刪除")])],1)])])})],2)])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column title"},[i("div",[i("p",[t._v("文章標題")])]),t._v(" "),i("div",[i("p",[t._v("作者")])]),t._v(" "),i("div",[i("p",[t._v("內容概覽")])]),t._v(" "),i("div",[i("p",[t._v("動作")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",[t._v("decade")])])}],a={render:s,staticRenderFns:n};e.a=a},gBIf:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"home"}},[i("Navbar"),t._v(" "),i("router-view")],1)},n=[],a={render:s,staticRenderFns:n};e.a=a},mUbh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"user",function(){return n}),i.d(e,"allPost",function(){return a});var s=i("Du/2"),n=function(t,e){return(0,t.commit)(s.b,e)},a=function(t,e){return(0,t.commit)(s.a,e)}},noBe:function(t,e,i){"use strict";var s=i("vjSj"),n=i("YKyH"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},o1li:function(t,e,i){"use strict";var s=i("mvHQ"),n=i.n(s),a=i("Dd8w"),o=i.n(a),c=i("NYxO");e.a={data:function(){return{classType:["體驗活動","肌膚保養","居家空間","生活品味","味蕾饗宴","時尚藝術"],stock:{type:1,comboList:[],img:[],name:"",info:"",count:"",available:!1,price:"",seller:[]},tools:{subtitle:'<input id="subtitle" type="text" placeholder="副標題">',microtitle:'<input id="microtitle" type="text" placeholder="小標題">',paragraph:'<textarea id="paragraph" name="" rows=\'10\' placeholder="文章段落"></textarea>'},addHTML:[],uploadFile:!1,addIframe:!1,image:"",onRemove:!1,pre:{type:"",summary:"",discription:"",note:""}}},computed:o()({},Object(c.c)(["user"])),mounted:function(){var t=this;this.stock.seller.push(this.user.uid),document.querySelectorAll("textarea").forEach(function(e){e.addEventListener("keyup",t.autosize)})},methods:{autosize:function(t){t.srcElement.style.cssText="height:auto",t.srcElement.style.cssText="height:"+t.srcElement.scrollHeight+"px"},classSelect:function(t,e){return this.pre.type=e,document.querySelectorAll(".classBar>ul>li").forEach(function(t){t.className=""}),document.querySelectorAll(".classBar>ul>li")[this.pre.type].className="active",this.pre.type},img:function(t){document.querySelector("#"+t).click()},Iframe:function(){this.addHTML.push(""+document.querySelector('input[name="iframe"]').value),this.addIframe=!1},handleFiles:function(t){var e=t.target.files||t.dataTransfer.files;this.createImage(e[0])},createImage:function(t){var e=this,i=new FileReader;i.onload=function(t){e.image=t.target.result},i.readAsDataURL(t)},imgUpload:function(){var t=this,e=new FormData;e.append("file",document.querySelector("#upload").files[0]),this.$http.put("/upload",e,{"Content-Type":"multipart/form-data"}).then(function(e){0===e.data.result&&(t.addHTML.push('<img id="image" src="'+e.data.path+'">'),t.image="",t.uploadFile=!1)})},imgUploadStock:function(){var t=this,e=new FormData;e.append("file",document.querySelector("#stock").files[0]),this.$http.put("/upload",e,{"Content-Type":"multipart/form-data"}).then(function(e){0===e.data.result&&(t.stock.img.push("http://60.249.179.125:3002"+e.data.path),t.image="",t.uploadFile=!1)})},preview:function(){function t(t,e,s){if("image"===s)i[e]='<img src="'+t.src+'">';else if("subtitle"===s)i[e]="<h2>"+t.value+"</h2>";else if("microtitle"===s)i[e]="<h3>"+t.value+"</h3>";else if("paragraph"===s)i[e]="<p>"+t.value+"</p>";else{var n=document.createElement("div");n.appendChild(t.cloneNode()),i[e]=n.innerHTML}}var e=this;this.pre.summary=document.querySelectorAll("#summary")[0].value,this.pre.discription="<p>"+document.querySelectorAll("#discription")[0].value+"</p>",this.pre.note="<p>"+document.querySelectorAll("#note")[0].value+"</p>";var i=[];document.querySelectorAll(".block").forEach(function(e){t(e.children[0],parseInt(e.id.replace("block-","")),e.children[0].id)}),i.forEach(function(t){e.pre.discription+=t}),this.stock.info=n()(this.pre)},submit:function(){this.preview(),this.$http.post("http://60.249.179.125:3001/stock",this.stock).then(function(t){0===t.data.result?window.open("http://60.249.179.125/shop/"+t.data.sid):console.log(t.data)})}}}},pQnX:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"stock"},[i("div",{staticClass:"editor"},[i("h1",[t._v("新增商品")]),t._v(" "),i("div",{staticClass:"editor-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.stock.name,expression:"stock.name"}],attrs:{id:"title",type:"text",placeholder:"商品名稱"},domProps:{value:t.stock.name},on:{input:function(e){e.target.composing||t.$set(t.stock,"name",e.target.value)}}}),t._v(" "),i("div",{staticClass:"classBar"},[i("ul",t._l(t.classType,function(e,s){return i("li",{on:{click:function(i){t.classSelect(e,s)}}},[i("span",{staticClass:"uppercase soli"},[t._v(t._s(e))])])}))]),t._v(" "),i("h2",[t._v("商品圖片")]),t._v(" "),i("div",{staticClass:"stock-img"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.stock.img.length<4,expression:"stock.img.length < 4"}],staticClass:"upload-container"},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"upload",id:"stock",accept:"image/*"},on:{change:t.handleFiles}}),t._v(" "),t.image?t._e():i("div",{staticClass:"button",on:{click:function(e){t.img("stock")}}},[i("font-awesome-icon",{attrs:{icon:"camera"}}),i("span",[t._v("選擇圖片")])],1),t._v(" "),t.image?i("div",{staticClass:"button pre",style:{"background-image":"url("+t.image+")"},on:{click:function(e){t.imgUploadStock()}}},[i("span",[t._v("確定上傳")])]):t._e()]),t._v(" "),t._l(t.stock.img,function(e,s){return i("div",{staticClass:"upload-container"},[i("div",{staticClass:"close",on:{click:function(e){t.stock.img.splice(s,1)}}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1),t._v(" "),i("div",{staticClass:"image",style:{background:"url("+e+")"}})])})],2),t._v(" "),i("h2",[t._v("商品資料")]),t._v(" "),i("textarea",{attrs:{name:"",rows:"5",id:"summary",placeholder:"商品簡介"}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stock.price,expression:"stock.price"}],attrs:{id:"subtitle",type:"text",placeholder:"售價"},domProps:{value:t.stock.price},on:{input:function(e){e.target.composing||t.$set(t.stock,"price",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stock.count,expression:"stock.count"}],attrs:{id:"subtitle",type:"text",placeholder:"銷貨數量"},domProps:{value:t.stock.count},on:{input:function(e){e.target.composing||t.$set(t.stock,"count",e.target.value)}}}),t._v(" "),i("h2",[t._v("商品描述")]),t._v(" "),i("textarea",{attrs:{name:"",id:"discription",rows:"10",placeholder:"文章段落"}}),t._v(" "),t._l(t.addHTML,function(e,s){return i("div",{staticClass:"blocks"},[t.onRemove?i("span",{staticClass:"icon",on:{click:function(e){t.addHTML.splice(s,1)}}},[i("font-awesome-icon",{attrs:{icon:"minus-circle"}})],1):t._e(),i("span",{staticClass:"block",attrs:{id:"block-"+s},domProps:{innerHTML:t._s(e)}})])}),t._v(" "),i("h2",[t._v("商品規格")]),t._v(" "),i("textarea",{attrs:{name:"",rows:"5",id:"note",placeholder:"多行文字"}})],2)]),t._v(" "),t.uploadFile?i("div",{staticClass:"imgUpload"},[i("div",{staticClass:"upload-container"},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"upload",id:"upload",accept:"image/*"},on:{change:t.handleFiles}}),t._v(" "),i("img",{staticClass:"preview",attrs:{src:t.image}}),t._v(" "),t.image?t._e():i("div",{staticClass:"button",on:{click:function(e){t.img("upload")}}},[t._v("上傳圖片")]),t._v(" "),t.image?i("div",{staticClass:"button",on:{click:function(e){t.imgUpload()}}},[t._v("確定")]):t._e()])]):t._e(),t._v(" "),t.addIframe?i("div",{staticClass:"imgUpload"},[i("div",{staticClass:"upload-container"},[i("input",{attrs:{type:"text",name:"iframe"}}),t._v(" "),i("div",{staticClass:"button",on:{click:function(e){t.Iframe()}}},[t._v("OK")])])]):t._e(),t._v(" "),i("div",{staticClass:"toolbox"},[i("ul",[i("li",{on:{click:function(e){t.addHTML.push(t.tools.subtitle)}}},[i("div",[t._v("h2")]),i("div",[t._v("副標題")])]),t._v(" "),i("li",{on:{click:function(e){t.addHTML.push(t.tools.microtitle)}}},[i("div",[t._v("h3")]),i("div",[t._v("小標題")])]),t._v(" "),i("li",{on:{click:function(e){t.addHTML.push(t.tools.paragraph)}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"paragraph"}})],1),i("div",[t._v("文章段落")])]),t._v(" "),i("li",{on:{click:function(e){t.uploadFile=!0}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"image"}})],1),i("div",[t._v("圖片")])]),t._v(" "),i("li",{on:{click:function(e){t.addIframe=!0}}},[i("div",[i("font-awesome-icon",{attrs:{icon:["fab","youtube"]}})],1),i("div",[t._v("影片嵌入")])]),t._v(" "),i("li",{on:{click:function(e){t.onRemove=!t.onRemove}}},[i("div",[i("font-awesome-icon",{attrs:{icon:"times"}})],1),i("div",[t._v("刪除區塊")])]),t._v(" "),i("li",{on:{click:t.submit}},[i("div",[i("font-awesome-icon",{attrs:{icon:"paper-plane"}})],1),i("div",[t._v("發佈")])])])])])},n=[],a={render:s,staticRenderFns:n};e.a=a},pe2R:function(t,e,i){"use strict";var s=i("OkQu"),n=i("fV2H"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},qzG6:function(t,e,i){"use strict";var s=i("IU37"),n=i("+6My"),a=i("VU/8"),o=a(s.a,n.a,!1,null,null,null);e.a=o.exports},sGXP:function(t,e,i){"use strict";var s=i("QuMW"),n=i("pe2R");i.d(e,"b",function(){return s.a}),i.d(e,"a",function(){return n.a})},uZxA:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iMzJweCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjQgMzI7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAzMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGlkPSJMYXllcl8xIi8+PGcgaWQ9InVzZXIiPjxnPjxwYXRoIGQ9Ik0xMiwxNkM1LjM3NSwxNiwwLDIxLjM3NSwwLDI4YzAsMi4yMTEsMS43ODksNCw0LDRoMTZjMi4yMTEsMCw0LTEuNzg5LDQtNCAgICBDMjQsMjEuMzc1LDE4LjYyNSwxNiwxMiwxNnoiIHN0eWxlPSJmaWxsOiM0RTRFNTA7Ii8+PGNpcmNsZSBjeD0iMTIiIGN5PSI2IiByPSI2IiBzdHlsZT0iZmlsbDojNEU0RTUwOyIvPjwvZz48L2c+PC9zdmc+"},vjSj:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("NYxO");e.a={computed:n()({},Object(a.c)(["user"]),Object(a.c)(["allpost"])),methods:{openLink:function(t){window.open(t)},deletePost:function(t){confirm("確定要刪除這篇文章？此動作不可回復")&&this.$http.delete("/api/post/"+t).then(function(t){t.data.result?console.log(t):window.location="/posts"})}}}},xJD8:function(t,e,i){"use strict";var s=i("fZjL"),n=i.n(s),a=i("Dd8w"),o=i.n(a),c=i("NYxO");e.a={computed:o()({},Object(c.c)(["user"])),mounted:function(){var t=this;this.$cookie.get("token")&&this.$http.get("/api/user/"+this.$cookie.get("token")).then(function(e){var i=e.data;0===i.result?(t.$store.commit("SET_USER",i),t.$router.push({name:"Home"})):t.$router.push({name:"Login"})}),0===n()(this.user).length||0!==this.user.result?this.$router.push({name:"Login"}):this.$router.push({name:"Home"})}}},xQV6:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],a={render:s,staticRenderFns:n};e.a=a}},["NHnr"]);
//# sourceMappingURL=app.62ce3dd53d342639d0f9.js.map